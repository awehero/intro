<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mesh Generator</title>
    <script>
        function processString(inputString) {
            // Step 1: Split the input string by capital letters
            const regex = /(?=[A-G])/g;
            const chunks = inputString.split(regex).filter(chunk => chunk.length > 0); // Removes empty chunks

            // Step 2: Iterate over each chunk and process it
            chunks.forEach(chunk => {
                // Split the first character (mesh type) from the rest of the string
                let type = chunk[0]; // First character (A, B, C, etc.)
                let rest = chunk.slice(1); // Rest of the string

                // Split by '$'
                const parts = rest.split('$');

                // Step 3: Extract values for position, rotation, size, etc.
                let xPos = parseFloat(parts[0]) / 100;
                let yPos = parseFloat(parts[1]) / 100;
                let zPos = parseFloat(parts[2]) / 100;
                let xRot = Math.round(parseFloat(parts[3]) / 100) / (Math.PI / 180);
                let yRot = Math.round(parseFloat(parts[4]) / 100) / (Math.PI / 180);
                let zRot = Math.round(parseFloat(parts[5]) / 100) / (Math.PI / 180);
                let xSize = parseFloat(parts[6]) / 100;
                let ySize = parseFloat(parts[7]) / 100;
                let zSize = parseFloat(parts[8]) / 100;
                let name = parts[9];  // The remaining part for name or other properties

                // Step 4: Generate mesh based on the type
                let mesh = createMesh(type, xPos, yPos, zPos, xRot, yRot, zRot, xSize, ySize, zSize, name);

                // Step 5: Log the mesh for debugging
                console.log(mesh);
            });
        }

        function createMesh(type, xPos, yPos, zPos, xRot, yRot, zRot, xSize, ySize, zSize, name) {
            let meshType = '';
            let mesh = {
                position: { x: xPos, y: yPos, z: zPos },
                rotation: { x: xRot, y: yRot, z: zRot },
                size: { x: xSize, y: ySize, z: zSize },
                name: name
            };

            // Determine mesh type based on the first character
            switch (type) {
                case 'A': meshType = 'Plane'; break;
                case 'B': meshType = 'Cube'; break;
                case 'C': meshType = 'Cone'; break;
                case 'D': meshType = 'UV Sphere'; break;
                case 'E': meshType = 'Cylinder'; break;
                case 'G': meshType = 'Monkey'; break;
                default: meshType = 'Unknown'; break;
            }

            mesh.type = meshType;
            return mesh;
        }

        // Example input string
        let inputString = "A0$-264$-2099.993$79$45$-13$100000$258$100$gy=-5.0?m=ffff00?turn=0.0?msg=104:101:108:108:111?br=0.0A5$-5021$-2099.986$0$0$0$100000$396$100$id=1";
        processString(inputString);
    </script>
</head>
<body>
    <h1>Mesh Generator Output</h1>
    <div id="output"></div>
</body>
</html>
